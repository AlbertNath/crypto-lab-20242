#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <stdlib.h>

//char *login="root";


int granted()
{
    printf("Lograste llegar hasta aquí. ¡Felicidades!\n");
    printf("Acceso Autorizado...");
    //Esta linea de código puede no funcionar en algunos SO
    //Realizalapr a c t i c a en K ali Linux
    system("gnome−terminal−xsh −c \"./a.out \"") ;
    return 0;
}

int main()
{
    char login[] = "root";
    char password[16];
    
    printf("¡Bienvenido!\n");
    printf("Ingresa la contraseña por favor: ");
       
    //fgets(password, sizeof(password), stdin);
       
     if (fgets(password, sizeof(password), stdin) == NULL) {
        printf("Error al leer la entrada.\n");
        return 1;
    }
    password[strcspn(password, "\n")] = '\0';

    if (strlen(password) == sizeof(password) - 1 && password[sizeof(password) - 2] != '\n') {

        int c;
        while ((c = getchar()) != '\n' && c != EOF);
    }
    
    if (strlen(password) > 15) {
        printf("La contraseña ingresada es demasiado larga. Acceso Denegado.\n");
        return 1;
    }

    if (strcmp(password, login) != 0) {
        printf("Lo siento, la contraseña es incorrecta. \nAcceso Denegado\n");
    } else {
        granted(password);
    }

    return 0;
}
